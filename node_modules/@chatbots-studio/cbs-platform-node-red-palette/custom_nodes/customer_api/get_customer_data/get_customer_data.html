<script type="text/javascript">
  RED.nodes.registerType('get-customer-data', {
    category: 'customerAPI',
    color: '#a7a8e2',
    defaults: {
      name: { value: '' },
      customerId: {
        value: '',
        required: true,
        validate: RED.validators.typedInput("customerIdType"),
      },
      customerIdType: { value: 'msg' },
      chatId: {
        value: '',
        required: true,
        validate: RED.validators.typedInput("chatIdType"),
      },
      chatIdType: { value: 'msg' },
      channel: {
        value: '',
        required: true,
        validate: RED.validators.typedInput("channelType"),
      },
      channelType: { value: 'msg' },
    },
    inputs: 1,
    outputs: 3,
    icon: 'white-globe.png',
    label: function () {
      return this.name || 'get-customer-data';
    },
    outputLabels: ['Successful response', 'Client error (4xx)', 'Server and other errors (5xx or without HTTP code)'],
    oneditprepare: function () {
      $('#node-input-customerId').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-customerIdType'),
      });

      $('#node-input-chatId').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-chatIdType'),
      });

      $('#node-input-channel').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-channelType'),
      });
    },
  });
</script>

<script type="text/html" data-template-name="get-customer-data">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>

    <div class="form-row">
        <label for="node-input-customerId"><i class="fa fa-id-card"></i> Customer ID</label>
        <input type="text" id="node-input-customerId">
        <input type="hidden" id="node-input-customerIdType">
    </div>

    <div class="form-row">
        <label for="node-input-chatId"><i class="fa fa-id-card"></i> Chat ID</label>
        <input type="text" id="node-input-chatId">
        <input type="hidden" id="node-input-chatIdType">
    </div>

    <div class="form-row">
        <label for="node-input-channel"><i class="fa fa-id-card"></i> Channel</label>
        <input type="text" id="node-input-channel">
        <input type="hidden" id="node-input-channelType">
    </div>
</script>

<script type="text/html" data-help-name="get-customer-data">
    <p>A node that returns Customer's data</p>
</script>


